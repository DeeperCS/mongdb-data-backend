<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>post test</title>>
    <script> 
        function sendJSON() {
          var http = new XMLHttpRequest();
          var url = "http://192.168.7.173:32792/insert_user";
          var params = 'orem=ipsum&name=binny';
          
          var jsonData = {
                "name": "张三",
                "gender": "男",
                "age": "35"
                };
          var jsonParams=JSON.stringify(jsonData); 
          console.log("sending:", jsonData)
          http.open('POST', url, true);

          //Send the proper header information along with the request
          http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

          http.onreadystatechange = function() {//Call a function when the state changes.
              if(http.readyState == 4 && http.status == 200) {
                  console.log("Return from server:");
                  console.log(http.responseText);
              }
          }
          console.log("sending:", jsonParams)
          http.send(jsonParams);
        }
        
        function sendRecord() {
          var http = new XMLHttpRequest();
          var url = "http://192.168.7.173:32792/insert_urine_record";
          var params = 'orem=ipsum&name=binny';
          
          var jsonData = {
                "user_data":{
                "name": "张三",
                "gender": "男",
                "age": "35"},
                 "urine_data":[
                     {"date":"2019-10-11", "urines":[
                                             {"time":"10:20", "volume":"350"},
                                             {"time":"11:35", "volume":"450"},
                                             {"time":"13:50", "volume":"250"}
                                         ]
                     },
                     {"date":"2019-10-12", "urines":[
                                             {"time":"14:12", "volume":"150"},
                                             {"time":"15:33", "volume":"240"},
                                             {"time":"16:32", "volume":"410"}
                                         ]
                     },
                 ]
                };

          var jsonParams=JSON.stringify(jsonData); 
          console.log("sending:", jsonData)
          http.open('POST', url, true);

          //Send the proper header information along with the request
          http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

          http.onreadystatechange = function() {//Call a function when the state changes.
              if(http.readyState == 4 && http.status == 200) {
                  console.log("Return from server:");
                  console.log(http.responseText);
              }
          }
          console.log("sending:", jsonParams)
          http.send(jsonParams);
        }

        
        function sendRecordNormal() {
          var http = new XMLHttpRequest();
          var url = "http://192.168.7.173:32792/insert_urine_record";
          var params = 'orem=ipsum&name=binny';
          
          var jsonData = {
                "user_data":{
                "name": "张三",
                "gender": "男",
                "age": "35"},
                 "urine_data":[
                     {"date":"2019-10-11", "urines":[
                                             {"time":"10:20", "volume":"350"},
                                             {"time":"11:35", "volume":"450"},
                                             {"time":"13:50", "volume":"250"}
                                         ]
                     },
                     {"date":"2019-10-12", "urines":[
                                             {"time":"14:12", "volume":"150"},
                                             {"time":"15:33", "volume":"240"},
                                             {"time":"16:32", "volume":"410"}
                                         ]
                     },
                 ]
                };

          var jsonParams=JSON.stringify(jsonData); 
          console.log("sending:", jsonData)
          http.open('POST', url, true);

          //Send the proper header information along with the request
          http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

          http.onreadystatechange = function() {//Call a function when the state changes.
              if(http.readyState == 4 && http.status == 200) {
                  console.log("Return from server:");
                  console.log(http.responseText);
              }
          }
          console.log("sending:", jsonParams)
          http.send(jsonParams);
        }
        
        
        function getRecord() {
          var http = new XMLHttpRequest();
          var url = "http://192.168.7.173:32792/get_record";
          var params = 'orem=ipsum&name=binny';
          
          var jsonData = {
                "user_data":{
                "name": "张三",
                "gender": "男",
                "age": "35"},
                 "urine_data":[
                     {"date":"2019-10-11", "urines":[
                                             {"time":"10:20", "volume":"350"},
                                             {"time":"11:35", "volume":"450"},
                                             {"time":"13:50", "volume":"250"}
                                         ]
                     },
                     {"date":"2019-10-12", "urines":[
                                             {"time":"14:12", "volume":"150"},
                                             {"time":"15:33", "volume":"240"},
                                             {"time":"16:32", "volume":"410"}
                                         ]
                     },
                 ]
                };

          var jsonParams=JSON.stringify(jsonData); 
          console.log("sending:", jsonData)
          http.open('POST', url, true);

          //Send the proper header information along with the request
          http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

          http.onreadystatechange = function() {//Call a function when the state changes.
              if(http.readyState == 4 && http.status == 200) {
                  console.log("Return from server:");
                  console.log(http.responseText);
              }
          }
          console.log("sending:", jsonParams)
          http.send(jsonParams);
        }
        
        
        function setDiagnosis() {
          var http = new XMLHttpRequest();
          var url = "http://192.168.7.173:32792/set_diagnosis";
          var params = 'orem=ipsum&name=binny';
          
          var jsonData = {
                "_id":"5e0af6e64f96e26362718259",
                "diagnosis":"Normal",
                };

          var jsonParams=JSON.stringify(jsonData); 
          console.log("sending:", jsonData)
          http.open('POST', url, true);

          //Send the proper header information along with the request
          http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

          http.onreadystatechange = function() {//Call a function when the state changes.
              if(http.readyState == 4 && http.status == 200) {
                  console.log("Return from server:");
                  console.log(http.responseText);
              }
          }
          console.log("sending:", jsonParams)
          http.send(jsonParams);
        }

    </script>
</head>
<body>
<div>
    <input type="button" onclick="sendJSON()" value="Send Json Test"/>
    
    <br>
    
    <input type="button" onclick="sendRecord()" value="添加记录Send Json Test (Record)"/>
    
    <br>
    
    <input type="button" onclick="getRecord()" value="Get Json Test (Record)"/>
    
    
    <br>
    
    <input type="button" onclick="setDiagnosis()" value="setDiagnosis Test"/>
    
    
    
</div>
</body>
</html>>